spec:
  name: django-chatbot
  description: Django Chatbot application with background task processing and communications via WebSockets.
  repository: https://github.com/slyapustin/django-chatbot/

  services:
    - name: web
      environment_slug: python
      instance_count: 1
      size: s-1vcpu-1gb
      routes:
        - path: /
          destinations:
            - web
      git:
        branch: do
        repo_clone_url: https://github.com/slyapustin/django-chatbot.git
    - name: worker
      environment_slug: python
      source_dir: .
      run_command: elery -A project worker --loglevel info

  components:
    - name: web
      environment_slug: python
      source_dir: .
      build_command: python manage.py migrate --noinput
      run_command: daphne project.asgi:application --port $PORT --bind 0.0.0.0
      envs:
        - DJANGO_SECRET_KEY

