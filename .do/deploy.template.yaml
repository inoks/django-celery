spec:
  name: django-chatbot
  envs:
    - key: DATABASE_URL
      value: ${default-db.DATABASE_URL}
      scope: RUN_TIME
    - key: DJANGO_SECRET_KEY
      value: "REPLACE_ME"
      type: SECRET
    - key: REDIS_URL
      scope: RUN_TIME
      value: ${default-redis.DATABASE_URL}
  services:
    - name: web
      environment_slug: python
      instance_count: 1
      instance_size_slug: basic-xxs
      git:
        branch: do
        repo_clone_url: https://github.com/slyapustin/django-chatbot.git
  workers:
    - name: worker
      git:
        branch: do
        repo_clone_url: https://github.com/slyapustin/django-chatbot.git
      run_command: celery -A project worker --loglevel info
  databases:
    - name: default-db
      engine: PG
      production: false
    - name: default-redis
      engine: REDIS
      production: true
      cluster_name: redis